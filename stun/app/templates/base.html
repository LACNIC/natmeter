{% load staticfiles %}
{% load i18n %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    {#Google auth#}
    <meta name="google-site-verification" content="lIBJB024gcZVoXDBZuktqXPxgNYhFHTNC--30FLOa_8"/>

    <meta name="description"
          content="Midiendo la penetración de NAT en América Latina y Caribe a través de servicios ICE / TURN."/>
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>{% block title %}Inicio{% endblock %} - NAT Meter</title>

    <!-- Google Fonts -->
    {#    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Lato:100">#}

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <meta http-equiv="content-type" content="text/html;charset=utf-8">

    <link rel="stylesheet" type="text/css" href="{% static "app/css/stun.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "app/css/lacniclabs-portales-negro.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "app/css/lacniclabs-override.css" %}">

    <link type="image/x-icon" href="{% static "app/imgs/favicon-r.ico" %}" rel="shortcut icon">
    <link rel="apple-touch-icon" href="{% static "app/imgs/favicon-r.ico" %}">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

    <!-- Progress bar -->
    <link rel='stylesheet' href='//cdn.dev.lacnic.net/mprogress.css'/>
    <script src='//cdn.dev.lacnic.net/mprogress.js'></script>

    {% block headers %}
    {% endblock %}

    <script type="application/javascript">
        function getCookie(cname) {
            var name = cname + "=";
            var decodedCookie = decodeURIComponent(document.cookie);
            var ca = decodedCookie.split(';');
            for (var i = 0; i < ca.length; i++) {
                var c = ca[i];
                while (c.charAt(0) == ' ') {
                    c = c.substring(1);
                }
                if (c.indexOf(name) == 0) {
                    return c.substring(name.length, c.length);
                }
            }
            return "";
        }

        document.cookie = "natmeter_csrftoken={{ csrf_token }}";
    </script>
    <script>

        function langRedirect(lang) {
            $.ajax({
                type: "POST",
                url: 'i18n/setlang/',
                beforeSend: function (xhr, settings) {
{#                    xhr.setRequestHeader("X-CSRFToken", getCookie('natmeter_csrftoken'));#}
                    xhr.setRequestHeader("X-CSRFToken", getCookie('natmeter_csrftoken'));
                    mprogress3.start();
{#                    $('#setlang-progress').addClass('mdl-progress--indeterminate');#}
                },
                data: {
                    'language': lang
                },
                success: function (d, s, xhr) {
                    window.location.href = '/';
                },
                error: function (a, b, c) {

                }
            })
            ;
        };

    </script>

    <script type="text/javascript">
        {% block javascript %}
        {% endblock %}
    </script>

    <style>
        {% block css %}
        {% endblock %}
    </style>

</head>
<body>

{#Barra anaranjada#}
<div id="barra-primaria" class="navbar">

    <a href="https://www.labs.lacnic.net" title="LACNIC labs" class="pull-left">
        <img src="{% static 'app/imgs/logos/logo_labs.png' %}" border="0" class="hidden-xs"
             alt="LACNIC Labs" style="max-height: 5em;"/>
        <img src="{% static 'app/imgs/logos/logo_labs_small.png' %}" border="0" class="visible-xs"
             alt="LACNIC Labs" style="max-height: 3em;"/>
    </a>

    <a id="titulo-primario" class="navbar-brand pull-right" href="{% url 'home' %}">
        <h2>
            NAT Meter
        </h2>
    </a>
</div>

{#Segunda barra#}
<div id="barra-secundaria" class="navbar">

    <ul class="nav navbar-nav">
        <li><a href="http://lacnic.net">{% trans "bar.secondary.home" %}</a></li>
        <li><a href="http://labs.lacnic.net">{% trans "bar.secondary.blog" %}</a></li>
    </ul>

    <ul id="setlang" class="nav navbar-nav navbar-right" style="margin-right: 1em;">
        <li><a href="#" onclick="langRedirect('en');">EN</a></li>
        <li><a href="#" onclick="langRedirect('es');">ES</a></li>
        <li>
            <span
                    class="glyphicon glyphicon-info-sign"
                    data-toggle="tooltip"
                    title="We need to store a security cookie on your browser to perform language translations and remember your language preferences (cookie name: natmeter_csrftoken)."
            ></span>
        </li>
        <!-- Material Design loading component -->
        <div
                id="setlang-progress"
                {#                class="mdl-progress mdl-js-progress"#}
                style="height:1px; width:5em; top:-15px; left:1em;"
        ></div>
    </ul>

</div>

<div class="container">
    <div class="header clearfix">
        {#        Nada#}
    </div>


    {% block header %}
    {% endblock %}

    <div id="fondo" class="row marketing">
        <div style="Margin: 1em; padding: 1em;">
            {% block content %}

                {#                Every child will get rendered in here.#}


            {% endblock %}
        </div>
    </div>


</div>

<footer class="row" style="background-color: #C4ABA2 ; padding: 1em;">

    <div class="col-sm-3 col-md-3 col-lg-3">
        <a href="https://www.labs.lacnic.net/">
            <img src="{% static "app/imgs/logos/logo_labs_foot.png" %}" class="hidden-xs center-block"
                 title="LACNIC labs"/>
            <img src="{% static "app/imgs/logos/logo_labs_foot.png" %}" class="visible-xs center-block"
                 title="LACNIC labs"/>
        </a>
    </div>

    {#    Django logo#}
    <div class="col-sm-3 col-md-3 col-lg-3" style="margin-top: 1em;">
        <div>
            <a href="https://www.djangoproject.com/">
                <img class="center-block" src="https://www.djangoproject.com/m/img/badges/djangomade124x25_grey.gif"
                     border="0" alt="Made with Django." title="Made with Django."/>
            </a>
        </div>
    </div>

    <!-- Begin LetsEncrypt site seal HTML -->
    <div class="col-sm-3 col-md-3 col-lg-3" data-language="en_US">
        <a href="https://letsencrypt.org/">
            {#            <img class="center-block" style="max-width:15em;"#}
            {#                 src="https://cdn.discourse.org/business/uploads/letsencrypt/original/1X/149e86cd7f135095e9c92f4e67a4b6a7b80a60c0.png">#}
        </a>
    </div>
    <!-- End LetsEncrypt site seal HTML -->

    <div class="col-sm-3 col-md-3 col-lg-3" style="margin-top: 1em;">
        <p class="center-block" style="text-align: center; font-family: monospace; color: #808080">
            Application Version: 1.0<br/>
            Last Updated: Nov. 10th<br/>
            <a href="https://github.com/LACNIC/natmeter/">GitHub source</a><br/>
            Latest Commit (<a href="https://github.com/LACNIC/natmeter/commit/">GitHub</a>)<br/>
            Los datos están disponibles en <a href="{% static 'results.csv' %}">este archivo CSV</a>.<br/>
        </p>
    </div>

</footer>

<!-- 		Analytics -->
<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
        a = s.createElement(o), m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script',
        '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-33695965-2', 'lacnic.net');
    ga('send', 'pageview');
</script>

<iframe id="iframe" sandbox="allow-same-origin" style="display: none"></iframe>

<script>
    var mprogress3 = new Mprogress({
        template: 3,
        parent: '#setlang-progress'
    });
</script>
<!-- STUN script async loading -->
<script type="application/javascript">
    (function (f, b) {
        var c = f.createElement(b),
            e = f.getElementsByTagName(b)[0];
        c.src = "https://cdn.rawgit.com/LACNIC/static/master/require.js"; //"http://requirejs.org/docs/release/2.3.2/minified/require.js";
        c.type = "text/javascript";
        e.parentNode.insertBefore(c, e);
        c.onload = c.onreadystatechange = function () {

            const debug = false;

            // Require libraries loaded
            requirejs.config({
                "paths": {
                    "stun": debug && "http://127.0.0.1:8000/static/app/js/stun" || "https://cdn.rawgit.com/LACNIC/natmeter/master/stun/app/static/app/js/stun"
                }
            });

            require(["stun"], function () {
                load();
                STUN.init();
            });
        }
    }(document, "script"));
</script>
</body>
</html>